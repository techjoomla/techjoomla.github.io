<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Writing your own API Plugin for REST API framework for Joomla (com_api)"><link href=https://docs.techjoomla.com/joomla-rest-api/com-api-plugin-development/ rel=canonical><meta name=author content=Techjoomla><link rel="shortcut icon" href=../../assets/images/techjoomla-favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.2.2"><title>Writing your own API Plugin</title><link rel=stylesheet href=../../assets/stylesheets/main.a2408e81.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content=#3f51b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel="preconnect dns-prefetch" href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-106743603-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#api-plugin-file-structure class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://docs.techjoomla.com/ title="Techjoomla Docs" class="md-header-nav__button md-logo" aria-label="Techjoomla Docs"> <img src=../../assets/images/techjoomla-logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Techjoomla Docs </span> <span class="md-header-nav__topic md-ellipsis"> Writing your own API Plugin </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/techjoomla/techjoomla.github.io title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> techjoomla.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <div class=md-hero data-md-component=hero> <div class="md-hero__inner md-grid"> Joomla REST API - Writing your own API Plugin </div> </div> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../com-api-introduction/ class="md-tabs__link md-tabs__link--active"> Joomla Rest API </a> </li> <li class=md-tabs__item> <a href=../../tj-reports/tjreports-introduction/ class=md-tabs__link> TJReports </a> </li> <li class=md-tabs__item> <a href=../../tj-queue/tjqueue-introduction/ class=md-tabs__link> TJQueue </a> </li> <li class=md-tabs__item> <a href=../../tj-vendors/tjvendors-introduction/ class=md-tabs__link> TJVendors </a> </li> <li class=md-tabs__item> <a href=../../tj-fields/tjfields-introduction/ class=md-tabs__link> TJFields </a> </li> <li class=md-tabs__item> <a href=../../tj-ucm/tjucm-introduction/ class=md-tabs__link> TJUCM </a> </li> <li class=md-tabs__item> <a href=../../hierarchy-management/hierarchy-manager-introduction/ class=md-tabs__link> Other Horizontal Extensions </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://docs.techjoomla.com/ title="Techjoomla Docs" class="md-nav__button md-logo" aria-label="Techjoomla Docs"> <img src=../../assets/images/techjoomla-logo.png alt=logo> </a> Techjoomla Docs </label> <div class=md-nav__source> <a href=https://github.com/techjoomla/techjoomla.github.io title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> techjoomla.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Joomla Rest API <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Joomla Rest API" data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Joomla Rest API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../com-api-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Writing your own API Plugin <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Writing your own API Plugin" class="md-nav__link md-nav__link--active"> Writing your own API Plugin </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#api-plugin-file-structure class=md-nav__link> API plugin file structure </a> </li> <li class=md-nav__item> <a href=#create-plugin-entry-file-usersphp-file class=md-nav__link> Create plugin entry file users.php file </a> </li> <li class=md-nav__item> <a href=#create-resource-file-loginphp-file class=md-nav__link> Create resource file login.php file </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> Error Handling </a> </li> <li class=md-nav__item> <a href=#private-and-public-resources class=md-nav__link> Private and public resources </a> </li> <li class=md-nav__item> <a href=#access-control class=md-nav__link> Access Control </a> </li> <li class=md-nav__item> <a href=#create-xml-file class=md-nav__link> Create .xml file </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../com-api-making-api-calls/ title="Making calls to API resources" class=md-nav__link> Making calls to API resources </a> </li> <li class=md-nav__item> <a href=../com-api-impersonation/ title="Impersonating another user" class=md-nav__link> Impersonating another user </a> </li> <li class=md-nav__item> <a href=../com-api-mobile-app-use-case/ title="Mobile App Use Case" class=md-nav__link> Mobile App Use Case </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> TJReports <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=TJReports data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> TJReports </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tj-reports/tjreports-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../tj-reports/tjreports-architecture-overview/ title="Architecture Overview" class=md-nav__link> Architecture Overview </a> </li> <li class=md-nav__item> <a href=../../tj-reports/tjreports-integration-guide/ title="Integration guide" class=md-nav__link> Integration guide </a> </li> <li class=md-nav__item> <a href=../../tj-reports/tjreports-write-report-plugin/ title="Writing a report plugin" class=md-nav__link> Writing a report plugin </a> </li> <li class=md-nav__item> <a href=../../tj-reports/tjreports-reports-with-dynamic-columns/ title="Reports with dyanamic columns" class=md-nav__link> Reports with dyanamic columns </a> </li> <li class=md-nav__item> <a href=../../tj-reports/tjreports-plugin-add-custom-fields-support/ title="Custom fields (com_fields) support in TJReports plugins" class=md-nav__link> Custom fields (com_fields) support in TJReports plugins </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> TJQueue <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=TJQueue data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> TJQueue </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tj-queue/tjqueue-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../tj-queue/tjqueue-integrating-with-extensions/ title="Integrating with extensions" class=md-nav__link> Integrating with extensions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> TJVendors <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=TJVendors data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> TJVendors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tj-vendors/tjvendors-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../tj-vendors/tjvendors-integrating-with-cpg-plugin/ title="Integrating TJ Vendors with CPG Plugin" class=md-nav__link> Integrating TJ Vendors with CPG Plugin </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> TJFields <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=TJFields data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> TJFields </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tj-fields/tjfields-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../tj-fields/com-tjfields-integrating-with-extensions/ title="Integrating with extensions" class=md-nav__link> Integrating with extensions </a> </li> <li class=md-nav__item> <a href=../../tj-fields/com-tjfields-add-new-field-type/ title="Add new field Type" class=md-nav__link> Add new field Type </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> TJUCM <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=TJUCM data-md-level=1> <label class=md-nav__title for=nav-7> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> TJUCM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tj-ucm/tjucm-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../tj-ucm/tjucm-features/ title=Features class=md-nav__link> Features </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Other Horizontal Extensions <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Other Horizontal Extensions" data-md-level=1> <label class=md-nav__title for=nav-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Other Horizontal Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-1 type=checkbox id=nav-8-1> <label class=md-nav__link for=nav-8-1> Hierarchy Management <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Hierarchy Management" data-md-level=2> <label class=md-nav__title for=nav-8-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Hierarchy Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../hierarchy-management/hierarchy-manager-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-8-2 type=checkbox id=nav-8-2> <label class=md-nav__link for=nav-8-2> Terms & Conditions Manager <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Terms & Conditions Manager" data-md-level=2> <label class=md-nav__title for=nav-8-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Terms & Conditions Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tnc-manager/tncmanager-introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#api-plugin-file-structure class=md-nav__link> API plugin file structure </a> </li> <li class=md-nav__item> <a href=#create-plugin-entry-file-usersphp-file class=md-nav__link> Create plugin entry file users.php file </a> </li> <li class=md-nav__item> <a href=#create-resource-file-loginphp-file class=md-nav__link> Create resource file login.php file </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> Error Handling </a> </li> <li class=md-nav__item> <a href=#private-and-public-resources class=md-nav__link> Private and public resources </a> </li> <li class=md-nav__item> <a href=#access-control class=md-nav__link> Access Control </a> </li> <li class=md-nav__item> <a href=#create-xml-file class=md-nav__link> Create .xml file </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/techjoomla/techjoomla.github.io/docs/joomla-rest-api/com-api-plugin-development.md title=com-api-plugin-development.md class="md-content__button md-icon"> Source <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </a> <h1>Writing your own API Plugin</h1> <p>You can add new APIs by creating plugins for your own components. Plugin needs to be of 'api' type. Each plugin can have multiple API resources.</p> <p>Each resource supports the GET, POST and DELETE operations. These are exposed by creating methods of the same name, i.e. <code>get()</code> <code>post()</code> and <code>delete()</code> in each of the resources. If a resouce URL is accessed via HTTP POST, the post() method is called, and similarly for the rest.</p> <h2 id=api-plugin-file-structure>API plugin file structure<a class=headerlink href=#api-plugin-file-structure title="Permanent link">&para;</a></h2> <ul> <li>users.php <em>(plugin entry file)</em></li> <li>users.xml <em>(plugin manifest file)</em></li> <li>users <em>(**Resources*</em> folder having resource file, keep name same as plugin name)*<ul> <li>login.php <em>(Resource file)</em></li> <li>users.php <em>(Resource file)</em></li> </ul> </li> <li>language/en-GB <em>(Resource folder having resource file, keep name same as plugin name)</em><ul> <li>en-GB.plg_api_users.ini <em>(add plugin language constant)</em></li> <li>en-GB.plg_api_users.sys.ini</li> </ul> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>You can add multiple resource in resource folder and use them for different purpose. Usually, each resource will map to an object type for your extension.</p> </div> <h2 id=create-plugin-entry-file-usersphp-file>Create plugin entry file users.php file<a class=headerlink href=#create-plugin-entry-file-usersphp-file title="Permanent link">&para;</a></h2> <p>This is the entry file for the API plugin, the things that re deifned in the file are resource locations, and making certain resources public. Below is the code for the file -</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=c1>// Class structure example</span>
<span class=k>class</span> <span class=nc>PlgAPIUsers</span> <span class=k>extends</span> <span class=nx>ApiPlugin</span>
<span class=p>{</span>
    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=o>&amp;</span><span class=nv>$subject</span><span class=p>,</span> <span class=nv>$config</span> <span class=o>=</span> <span class=k>array</span><span class=p>())</span>
    <span class=p>{</span>
        <span class=k>parent</span><span class=o>::</span><span class=na>__construct</span><span class=p>(</span><span class=nv>$subject</span><span class=p>,</span> <span class=nv>$config</span> <span class=o>=</span> <span class=k>array</span><span class=p>());</span>

        <span class=c1>// Set resource path</span>
        <span class=nx>ApiResource</span><span class=o>::</span><span class=na>addIncludePath</span><span class=p>(</span><span class=nb>dirname</span><span class=p>(</span><span class=no>__FILE__</span><span class=p>)</span> <span class=o>.</span> <span class=s1>&#39;/users&#39;</span><span class=p>);</span>

        <span class=c1>// Load language files</span>
        <span class=nv>$lang</span> <span class=o>=</span> <span class=nx>JFactory</span><span class=o>::</span><span class=na>getLanguage</span><span class=p>();</span>
        <span class=nv>$lang</span><span class=o>-&gt;</span><span class=na>load</span><span class=p>(</span><span class=s1>&#39;com_users&#39;</span><span class=p>,</span> <span class=nx>JPATH_ADMINISTRATOR</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>

        <span class=c1>// Set the login resource to be public</span>
        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>setResourceAccess</span><span class=p>(</span><span class=s1>&#39;login&#39;</span><span class=p>,</span> <span class=s1>&#39;public&#39;</span><span class=p>,</span> <span class=s1>&#39;post&#39;</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <h2 id=create-resource-file-loginphp-file>Create resource file login.php file<a class=headerlink href=#create-resource-file-loginphp-file title="Permanent link">&para;</a></h2> <p>Although you can place the resource files anywhere, the recommended approach is to place them within a folder inside your plugin.</p> <p>Below is example code for a resource file. Notice how the methods get() and post() are implemented. The methods may return an array or an object which will be automatically converted to JSON or XML.</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=k>class</span> <span class=nc>UsersApiResourceLogin</span> <span class=k>extends</span> <span class=nx>ApiResource</span>
<span class=p>{</span>
    <span class=k>public</span> <span class=k>function</span> <span class=nf>get</span><span class=p>()</span>
    <span class=p>{</span>
        <span class=nv>$result</span>       <span class=o>=</span> <span class=k>new</span> <span class=nx>\stdClass</span><span class=p>;</span>
        <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>id</span>   <span class=o>=</span> <span class=mi>45</span><span class=p>;</span>
        <span class=nv>$result</span><span class=o>-&gt;</span><span class=na>name</span> <span class=o>=</span> <span class=s2>&quot;John Doe&quot;</span><span class=p>;</span>

        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>plugin</span><span class=o>-&gt;</span><span class=na>setResponse</span><span class=p>(</span> <span class=nv>$result</span> <span class=p>);</span>
    <span class=p>}</span>

    <span class=k>public</span> <span class=k>function</span> <span class=nf>post</span><span class=p>()</span>
    <span class=p>{</span>
        <span class=c1>// Add your code here</span>

        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>plugin</span><span class=o>-&gt;</span><span class=na>setResponse</span><span class=p>(</span> <span class=nv>$result</span> <span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>The array or object from the plugin should be set via <code>$this-&gt;plugin-&gt;setResponse()</code>.</p> <h2 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">&para;</a></h2> <p>It is possible to send HTTP errors with the right HTTP codes using the <code>APIError::raiseError()</code> method. Depending on the type of error you can raise different Exceptions that set the appropriate HTTP code.</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=k>public</span> <span class=k>function</span> <span class=nf>post</span><span class=p>()</span>
<span class=p>{</span>
    <span class=c1>// Validation Error sets HTTP 400</span>
    <span class=nx>ApiError</span><span class=o>::</span><span class=na>raiseError</span><span class=p>(</span><span class=mi>10001</span><span class=p>,</span> <span class=s2>&quot;Invalid Email&quot;</span><span class=p>,</span> <span class=s1>&#39;APIValidationException&#39;</span><span class=p>);</span>

    <span class=c1>// Access Error sets HTTP 403</span>
    <span class=nx>ApiError</span><span class=o>::</span><span class=na>raiseError</span><span class=p>(</span><span class=mi>11001</span><span class=p>,</span> <span class=s2>&quot;Not authorised&quot;</span><span class=p>,</span> <span class=s1>&#39;APIUnauthorisedException&#39;</span><span class=p>);</span>

    <span class=c1>// Not Found Error sets HTTP 404</span>
    <span class=nx>ApiError</span><span class=o>::</span><span class=na>raiseError</span><span class=p>(</span><span class=mi>12001</span><span class=p>,</span> <span class=s2>&quot;Record not found&quot;</span><span class=p>,</span> <span class=s1>&#39;APINotFoundException&#39;</span><span class=p>);</span>

    <span class=c1>// General Error sets HTTP 400</span>
    <span class=nx>ApiError</span><span class=o>::</span><span class=na>raiseError</span><span class=p>(</span><span class=mi>10000</span><span class=p>,</span> <span class=s2>&quot;Bad Request&quot;</span><span class=p>,</span> <span class=s1>&#39;APIException&#39;</span><span class=p>);</span>

<span class=p>}</span>
</code></pre></div> <p>You are free to specify your own error code and message. It is also possible to add more Exceptions in the <code>components/com_api/libraries/exceptions</code> folder.</p> <p>When using <code>APIError::raiseError()</code> there is no need to use <code>$this-&gt;plugin-&gt;setResponse()</code> since com_api handles the response and setting the http code.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The exception classes extend PHP's <code>Exception</code> class. So you will need to use numeric only codes, since PHP does not support non-numeric Exception codes.</p> </div> <h2 id=private-and-public-resources>Private and public resources<a class=headerlink href=#private-and-public-resources title="Permanent link">&para;</a></h2> <p>Unless specified, all resources are private, which means an API token is needed to access. However, it is possible to make certain resource and methods public by using the setResourceAccess() access method as</p> <div class=highlight><pre><span></span><code><span class=x>$this-&gt;setResourceAccess(&#39;login&#39;, &#39;public&#39;, &#39;post&#39;) ;</span>
</code></pre></div> <p>The first parameter is the resource name, second is status (should be public to make it public) and last is HTTP method to make public. Setting a resource public will mean that the API URL for that resource will not need any authentication.</p> <h2 id=access-control>Access Control<a class=headerlink href=#access-control title="Permanent link">&para;</a></h2> <p>ACL needs to be handled by the respective plugins. com_api makes a <code>$this-&gt;user</code> object available in the resource class. This is same as the JFactory::getUser() object for the user to whom the token belongs. It is upto the resource to use the user object and apply the necessary access control and produce authorisation errors.</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=k>class</span> <span class=nc>ExamplesApiResourceExample</span> <span class=k>extends</span> <span class=nx>ApiResource</span>
<span class=p>{</span>
    <span class=k>public</span> <span class=k>function</span> <span class=nf>get</span><span class=p>()</span>
    <span class=p>{</span>
        <span class=c1>// Will dump the object for the user who is making the API call</span>
        <span class=nb>var_dump</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>user</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <h2 id=create-xml-file>Create .xml file<a class=headerlink href=#create-xml-file title="Permanent link">&para;</a></h2> <p>Finally create a manifest XML so that your plugin can be installed. Set group as 'api', add plugin name and other details.</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;extension</span> <span class=na>version=</span><span class=s>&quot;3.0.0&quot;</span> <span class=na>type=</span><span class=s>&quot;plugin&quot;</span> <span class=na>group=</span><span class=s>&quot;api&quot;</span> <span class=na>method=</span><span class=s>&quot;upgrade&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;name&gt;</span>YourPlugin<span class=nt>&lt;/name&gt;</span>
    <span class=nt>&lt;version&gt;</span>1.0<span class=nt>&lt;/version&gt;</span>
    <span class=nt>&lt;creationDate&gt;</span>10/11/2016<span class=nt>&lt;/creationDate&gt;</span>
    <span class=nt>&lt;author&gt;&lt;/author&gt;</span>
    <span class=nt>&lt;description&gt;&lt;/description&gt;</span>
    <span class=nt>&lt;files&gt;</span>
        <span class=nt>&lt;filename</span> <span class=na>plugin=</span><span class=s>&quot;your_plugin_name&quot;</span><span class=nt>&gt;</span>your_plugin_name.php<span class=nt>&lt;/filename&gt;</span>
        <span class=nt>&lt;folder&gt;</span>your_plugin_name<span class=nt>&lt;/folder&gt;</span>
    <span class=nt>&lt;/files&gt;</span>
    <span class=nt>&lt;languages</span> <span class=na>folder=</span><span class=s>&quot;language&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;language</span> <span class=na>tag=</span><span class=s>&quot;en-GB&quot;</span><span class=nt>&gt;</span>en-GB/en-GB.plg_api_plugin_name.ini<span class=nt>&lt;/language&gt;</span>
        <span class=nt>&lt;language</span> <span class=na>tag=</span><span class=s>&quot;en-GB&quot;</span><span class=nt>&gt;</span>en-GB/en-GB.plg_api_plugin_name.sys.ini<span class=nt>&lt;/language&gt;</span>
    <span class=nt>&lt;/languages&gt;</span>
<span class=nt>&lt;/extension&gt;</span>
</code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tips for writing plugins</p> <ul> <li>Think of API plugins as a replacement of controllers. Any business logic that you won't put in a controller, leave it out of the plugin too. Load and use your models in the plugin code.</li> <li>It is not recommended to have API specific language files unless absolutely necessary. You will ususally make plugins for an existing component, so load the language files from that component.</li> <li>To create the list and details for an object type, you can either add a condition based on <code>id</code> query parameter in the <code>get()</code> method, or have a separate resource for the list.</li> </ul> </div> <hr> <div class=md-source-date> <small> Last update: June 3, 2020 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../com-api-introduction/ title=Introduction class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Introduction </div> </div> </a> <a href=../com-api-making-api-calls/ title="Making calls to API resources" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Making calls to API resources </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2008 - 2020 Techjoomla </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/techjoomla target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://facebook.com/techjoomla target=_blank rel=noopener title=facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> <a href=https://twitter.com/techjoomla target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://linkedin.com/in/techjoomla target=_blank rel=noopener title=linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>